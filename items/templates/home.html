{% extends "base.html" %}
{% load static %}
{% block content %}

<style>
/* Custom hover effects and card design */
.card-custom {
  transition: all 0.3s ease;
  border: none;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}
.card-custom:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 20px rgba(0,0,0,0.15);
}
.card-img-top {
  height: 220px;
  object-fit: cover;
}
.badge-custom {
  font-size: 0.9rem;
  padding: 0.4em 0.8em;
  border-radius: 20px;
}
.section-title {
  font-weight: 600;
  letter-spacing: 0.5px;
}
</style>

<div class="container my-5">
  <h2 class="text-center fw-bold mb-5 text-primary">
    ğŸ’ UAP Lost & Found Portal
  </h2>

  <!-- ğŸŒ¿ Found Items Section -->
  <h3 class="mb-4 text-success section-title">âœ¨ Recently Found Items</h3>
  <div class="row">
    {% for item in found_items %}
      <div class="col-md-4 mb-4">
        <div class="card card-custom rounded-4">
          {% if item.photo %}
            <img src="{{ item.photo.url }}" class="card-img-top rounded-top-4" alt="{{ item.item_name }}">
          {% else %}
            <img src="{% static 'images/no-image.jpg' %}" class="card-img-top rounded-top-4" alt="No image">
          {% endif %}
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <h5 class="card-title text-dark">{{ item.item_name }}</h5>
              <span class="badge bg-success badge-custom">Found</span>
            </div>
            <p class="card-text text-muted">{{ item.description|truncatewords:20 }}</p>
            <p class="small text-secondary">
              ğŸ“ {{ item.location }}<br>
              ğŸ—“ï¸ {{ item.date_found }}
            </p>

            {% if user.is_authenticated %}
              <a href="{% url 'claim_item' item.id %}" class="btn btn-outline-success w-100 rounded-3 mt-2">
                Claim This Item
              </a>
            {% else %}
              <p class="text-muted mt-2 text-center">
                Please <a href="/login/">log in</a> to claim this item.
              </p>
            {% endif %}
          </div>
        </div>
      </div>
    {% empty %}
      <p>No found items posted yet.</p>
    {% endfor %}
  </div>

  <hr class="my-5">

  <!-- ğŸ”¥ Lost Items Section -->
  <h3 class="mb-4 text-danger section-title">ğŸ’” Recently Lost Items</h3>
  <div class="row">
    {% for item in lost_items %}
      <div class="col-md-4 mb-4">
        <div class="card card-custom rounded-4">
          {% if item.photo %}
            <img src="{{ item.photo.url }}" class="card-img-top rounded-top-4" alt="{{ item.item_name }}">
          {% else %}
            <img src="{% static 'images/no-image.jpg' %}" class="card-img-top rounded-top-4" alt="No image">
          {% endif %}
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-2">
              <h5 class="card-title text-dark">{{ item.item_name }}</h5>
              <span class="badge bg-danger badge-custom">Lost</span>
            </div>
            <p class="card-text text-muted">{{ item.description|truncatewords:20 }}</p>
            <p class="small text-secondary">
              ğŸ“ {{ item.location }}<br>
              ğŸ—“ï¸ {{ item.date_lost }}
            </p>
          </div>
        </div>
      </div>
    {% empty %}
      <p>No lost items posted yet.</p>
    {% endfor %}
  </div>
</div>

{% endblock %}
